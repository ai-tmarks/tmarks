name = "tmarks"
compatibility_date = "2024-03-18"
pages_build_output_dir = ".deploy"

# This is the D1 database binding.
# The 'binding' property is the name of the global variable that will be available in your code.
# The 'database_name' is the name of the database in the Cloudflare dashboard.
# The 'database_id' is the unique ID of the database.
[[d1_databases]]
binding = "DB"
database_name = "tmarks-prod-db"
database_id = "738dfa55-15d3-4851-b58b-a52e1b08bea4"

# KV namespaces
# 注意: 需要先创建KV命名空间,然后填入正确的ID
# 创建命令: wrangler kv:namespace create "RATE_LIMIT_KV"
#          wrangler kv:namespace create "PUBLIC_SHARE_KV"
# 或者在Cloudflare Dashboard中创建: Workers & Pages → KV → Create a namespace

[[kv_namespaces]]
binding = "RATE_LIMIT_KV"
id = "fb8761fc50d24680ab295c9876ecdab7"  # 需要先创建KV命名空间

[[kv_namespaces]]
binding = "PUBLIC_SHARE_KV"
id = "960897e88daa40a0b7a51c6f33116d00"  # 需要先创建KV命名空间

# Environment variables
# ⚠️ 安全警告: 敏感信息不应该提交到Git仓库!
#
# 推荐做法:
# 1. 在Cloudflare Dashboard中配置环境变量 (Settings → Environment variables)
# 2. 本地开发使用 .dev.vars 文件 (已在.gitignore中)
# 3. wrangler.toml 只保留非敏感的默认值

[vars]
ALLOW_REGISTRATION = "true"
ENVIRONMENT = "production"
JWT_ACCESS_TOKEN_EXPIRES_IN = "365d"
JWT_REFRESH_TOKEN_EXPIRES_IN = "365d"

# ⚠️ 敏感信息必须在Cloudflare Dashboard中配置:
# - JWT_SECRET (至少32个字符的随机字符串)

# - ENCRYPTION_KEY (至少32个字符的随机字符串)

